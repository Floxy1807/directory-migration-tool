# 版本管理说明

本文件记录自动版本号管理与发布产物命名规则（来自原根目录文档）。

## 版本号格式

采用语义化版本：`major.minor.patch`

## 自动版本管理

- 配置文件：`version.json`
- 脚本：`publish.ps1`、`publish-advanced.ps1`
- 行为：读取版本 → 递增 `patch` → 写回 `csproj` 的 `<Version>/<AssemblyVersion>/<FileVersion>` → 编译 → 重命名输出文件为 `目录迁移工具-vX.Y.Z.exe`

`version.json` 示例：
```json
{
  "major": 1,
  "minor": 0,
  "patch": 0,
  "description": "版本号管理文件 - 每次打包时自动递增 patch 版本号"
}
```

## 常用发布命令

```powershell
# 标准打包（~74MB 自包含）
./publish.ps1

# 高级脚本
./publish-advanced.ps1 standard   # 标准版
./publish-advanced.ps1 fast       # 快速版（R2R，体积更大）
./publish-advanced.ps1 all        # 全部
```

## Git 最佳实践

```bash
git add version.json MoveWithSymlinkWPF/MoveWithSymlinkWPF.csproj
git commit -m "chore: release vX.Y.Z"
git tag vX.Y.Z
git push origin master --tags
```

## 注意事项

- 每次打包都会递增 `patch`，失败重打需手动回退 `version.json`
- 版本号会反映到 exe 文件属性与名称
- 建议发布时打 Git 标签

